{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PICHAU\\\\Desktop\\\\estudosProg\\\\dashboard\\\\minha-carteira\\\\src\\\\pages\\\\Dashboard\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useMemo } from 'react';\nimport ContentHeader from '../../components/ContentHeader';\nimport SelectInput from '../../components/SelectInput';\nimport WalletBox from '../../components/WalletBox';\nimport MessageBox from '../../components/MessageBox';\nimport PieChartBox from '../../components/PieChartBox';\nimport HistoryBox from '../../components/HistoryBox';\nimport BarChartBox from '../../components/BarChartBox';\nimport happyImg from '../../assets/happy.svg';\nimport sadImg from '../../assets/sad.svg';\nimport grinningImg from '../../assets/grinning.svg';\nimport expenses from '../../repositories/expenses';\nimport gains from '../../repositories/gains';\nimport listOfMonths from '../../utils/months';\nimport { Container, Content } from './styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Dashboard = () => {\n  _s();\n\n  const [monthSelect, setMonthSelected] = useState(new Date().getMonth() + 1);\n  const [yearSelect, setYearSelected] = useState(new Date().getFullYear());\n\n  const handleMonthSelected = month => {\n    try {\n      const parseMonth = Number(month);\n      setMonthSelected(parseMonth);\n    } catch (error) {\n      throw new Error('invalid month value; Is accept 0 - 12.');\n    }\n  };\n\n  const handleYearSelected = year => {\n    try {\n      const parseYear = Number(year);\n      setYearSelected(parseYear);\n    } catch (error) {\n      throw new Error('invalid Year value');\n    }\n  };\n\n  const months = [{\n    value: 1,\n    label: 'Janeiro'\n  }, {\n    value: 2,\n    label: 'Fevereiro'\n  }, {\n    value: 3,\n    label: 'Março'\n  }, {\n    value: 4,\n    label: 'Abril'\n  }, {\n    value: 5,\n    label: 'Maio'\n  }, {\n    value: 6,\n    label: 'Junho'\n  }, {\n    value: 7,\n    label: 'Julho'\n  }, {\n    value: 8,\n    label: 'Agosto'\n  }, {\n    value: 9,\n    label: 'Setembro'\n  }, {\n    value: 10,\n    label: 'Outubro'\n  }, {\n    value: 11,\n    label: 'Março'\n  }, {\n    value: 12,\n    label: 'Dezembro'\n  }];\n  const years = [{\n    value: 2021,\n    label: 2021\n  }, {\n    value: 2020,\n    label: 2020\n  }, {\n    value: 2022,\n    label: 2022\n  }];\n  const totalExpenses = useMemo(() => {\n    let total = 0;\n    expenses.forEach(item => {\n      const date = new Date(item.date);\n      const year = date.getFullYear();\n      const month = date.getMonth() + 1;\n\n      if (month === monthSelect && year === yearSelect) {\n        try {\n          total += Number(item.amount);\n        } catch {\n          throw new Error('Invalid amount!');\n        }\n      }\n    });\n    return total;\n  }, [monthSelect, yearSelect]);\n  const totalGains = useMemo(() => {\n    let total = 0;\n    gains.forEach(item => {\n      const date = new Date(item.date);\n      const year = date.getFullYear();\n      const month = date.getMonth() + 1;\n\n      if (month === monthSelect && year === yearSelect) {\n        try {\n          total += Number(item.amount);\n        } catch {\n          throw new Error('Invalid amount!');\n        }\n      }\n    });\n    return total;\n  }, [monthSelect, yearSelect]);\n  const totalBalance = useMemo(() => {\n    return totalGains - totalExpenses;\n  }, [totalGains, totalExpenses]);\n  const message = useMemo(() => {\n    if (totalBalance < 0) {\n      return {\n        title: \"Que triste!\",\n        description: \"Nesse mës vocë gastou mais do que deveria!\",\n        footerText: \"Verifique seus gastos.\",\n        icon: sadImg\n      };\n    } else if (totalBalance === 0) {\n      return {\n        title: \"Ufa!\",\n        description: \"Quase Hein!!\",\n        footerText: \"Tenha cuidado.\",\n        icon: grinningImg\n      };\n    } else {\n      return {\n        title: \"Muito bem!\",\n        description: \"Sua carteira fechou positiva!\",\n        footerText: \"Continue assim.\",\n        icon: happyImg\n      };\n    }\n  }, [totalBalance]);\n  const relationExpensesVersusGains = useMemo(() => {\n    const total = totalGains + totalExpenses;\n    const percentGains = totalGains / total * 100;\n    const percentExpenses = totalExpenses / total * 100;\n    const data = [{\n      name: \"Entradas\",\n      value: totalGains,\n      percent: Number(percentGains.toFixed(1)),\n      color: '#e44c4e'\n    }, {\n      name: \"Saídas\",\n      value: totalExpenses,\n      percent: Number(percentExpenses.toFixed(1)),\n      color: '#f7931b'\n    }];\n    return data;\n  }, [totalGains, totalExpenses]);\n  const historyData = useMemo(() => {\n    return listOfMonths.map((_, month) => {\n      let amountEntry = 0;\n      gains.forEach(gain => {\n        const date = new Date(gain.date);\n        const gainMonth = date.getMonth();\n        const gainYear = date.getFullYear();\n\n        if (gainMonth === month && gainYear === yearSelect) {\n          try {\n            amountEntry += Number(gain.amount);\n          } catch {\n            throw new Error('amountEntry is invalid!');\n          }\n        }\n      });\n      let amountOutput = 0;\n      gains.forEach(expense => {\n        const date = new Date(expense.date);\n        const expenseMonth = date.getMonth() + 1;\n        const expenseYear = date.getFullYear();\n\n        if (expenseMonth === month && expenseYear === yearSelect) {\n          try {\n            amountOutput += Number(expense.amount);\n          } catch {\n            throw new Error('amountOutput is invalid!');\n          }\n        }\n      });\n      return {\n        monthNumber: month,\n        month: listOfMonths[month].substr(0, 3),\n        amountEntry,\n        amountOutput\n      };\n    }).filter(item => {\n      const currentMonth = new Date().getMonth();\n      const currentYear = new Date().getFullYear();\n      return yearSelect === currentYear && item.monthNumber <= currentMonth || yearSelect < currentYear;\n    });\n  }, [yearSelect]);\n  const relationExpensesRecurrentVersusEventual = useMemo(() => {\n    let amountRecurrent = 0;\n    let amountEventual = 0;\n    expenses.filter(expense => {\n      const date = new Date(expense.date);\n      const year = date.getFullYear();\n      const month = date.getMonth() + 1;\n      return month === monthSelect && year === yearSelect;\n    }).forEach(expense => {\n      if (expense.frequency === 'recurrent') {\n        return amountRecurrent += Number(expense.amount);\n      }\n\n      if (expense.frequency === 'eventual') {\n        return amountEventual += Number(expense.amount);\n      }\n    });\n    const total = amountRecurrent + amountEventual;\n    return [{\n      name: \"Recorrentes\",\n      amount: amountRecurrent,\n      percent: Number((amountRecurrent / total * 100).toFixed(2)),\n      color: \"#f7931b\"\n    }, {\n      name: \"Eventuais\",\n      amount: amountEventual,\n      percent: Number((amountEventual / total * 100).toFixed(2)),\n      color: \"#e44c4e\"\n    }];\n  }, [monthSelect, yearSelect]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(ContentHeader, {\n      title: \"Dashboard\",\n      lineColor: \"#f7931b\",\n      children: [/*#__PURE__*/_jsxDEV(SelectInput, {\n        options: months,\n        onChange: e => handleMonthSelected(e.target.value),\n        defaultValue: monthSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SelectInput, {\n        options: years,\n        onChange: e => handleYearSelected(e.target.value),\n        defaultValue: yearSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Content, {\n      children: [/*#__PURE__*/_jsxDEV(WalletBox, {\n        title: \"Saldo\",\n        amount: totalBalance,\n        footerLabel: \"atualizado com base\",\n        icon: \"dolar\",\n        color: \"#4e41f0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(WalletBox, {\n        title: \"Entradas\",\n        amount: totalGains,\n        footerLabel: \"entradas\",\n        icon: \"arrowUp\",\n        color: \"#f7931b\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(WalletBox, {\n        title: \"Sa\\xEDdas\",\n        amount: totalExpenses,\n        footerLabel: \"Sa\\xEDdas\",\n        icon: \"arrowDown\",\n        color: \"#e44c4e\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MessageBox, {\n        title: message.title,\n        description: message.description,\n        footerText: message.footerText,\n        icon: message.icon\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PieChartBox, {\n        data: relationExpensesVersusGains\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(HistoryBox, {\n        data: historyData,\n        lineColorAmountEntry: \"#f7931b\",\n        lineColorAmountOutout: \"#e44c4e\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(BarChartBox, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 252,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Dashboard, \"UXeWDmCM1r6hcRb1A29P5+/I0Gs=\");\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["C:/Users/PICHAU/Desktop/estudosProg/dashboard/minha-carteira/src/pages/Dashboard/index.tsx"],"names":["React","useState","useMemo","ContentHeader","SelectInput","WalletBox","MessageBox","PieChartBox","HistoryBox","BarChartBox","happyImg","sadImg","grinningImg","expenses","gains","listOfMonths","Container","Content","Dashboard","monthSelect","setMonthSelected","Date","getMonth","yearSelect","setYearSelected","getFullYear","handleMonthSelected","month","parseMonth","Number","error","Error","handleYearSelected","year","parseYear","months","value","label","years","totalExpenses","total","forEach","item","date","amount","totalGains","totalBalance","message","title","description","footerText","icon","relationExpensesVersusGains","percentGains","percentExpenses","data","name","percent","toFixed","color","historyData","map","_","amountEntry","gain","gainMonth","gainYear","amountOutput","expense","expenseMonth","expenseYear","monthNumber","substr","filter","currentMonth","currentYear","relationExpensesRecurrentVersusEventual","amountRecurrent","amountEventual","frequency","e","target"],"mappings":"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","sourcesContent":["\r\nimport React, { useState, useMemo } from 'react';\r\n\r\nimport ContentHeader from '../../components/ContentHeader';\r\nimport SelectInput from '../../components/SelectInput';\r\nimport WalletBox from '../../components/WalletBox';\r\nimport MessageBox from '../../components/MessageBox';\r\nimport PieChartBox from '../../components/PieChartBox';\r\nimport HistoryBox from '../../components/HistoryBox';\r\nimport BarChartBox from '../../components/BarChartBox';\r\n\r\nimport happyImg from '../../assets/happy.svg';\r\nimport sadImg from '../../assets/sad.svg';\r\nimport grinningImg from '../../assets/grinning.svg';\r\n\r\nimport expenses from '../../repositories/expenses';\r\nimport gains from '../../repositories/gains';\r\n\r\nimport listOfMonths from '../../utils/months';\r\n\r\nimport {\r\n    Container,\r\n    Content,\r\n} from './styles';\r\n\r\nconst Dashboard: React.FC = () => {\r\n\r\n    const [monthSelect, setMonthSelected] = useState<number>(new Date().getMonth() + 1);\r\n    const [yearSelect, setYearSelected] = useState<number>(new Date().getFullYear());\r\n\r\n    const handleMonthSelected = (month : string) => {\r\n        try {\r\n            const parseMonth = Number(month);\r\n            setMonthSelected(parseMonth);\r\n        } catch (error) {\r\n            throw new Error('invalid month value; Is accept 0 - 12.');\r\n        }\r\n    };\r\n\r\n    const handleYearSelected = (year : string) => {\r\n        try {\r\n            const parseYear = Number(year);\r\n            setYearSelected(parseYear);\r\n        } catch (error) {\r\n            throw new Error('invalid Year value');\r\n        }\r\n    };\r\n\r\n    const months = [\r\n        {value: 1, label: 'Janeiro'},\r\n        {value: 2, label: 'Fevereiro'},\r\n        {value: 3, label: 'Março'},\r\n        {value: 4, label: 'Abril'},\r\n        {value: 5, label: 'Maio'},\r\n        {value: 6, label: 'Junho'},\r\n        {value: 7, label: 'Julho'},\r\n        {value: 8, label: 'Agosto'},\r\n        {value: 9, label: 'Setembro'},\r\n        {value: 10, label: 'Outubro'},\r\n        {value: 11, label: 'Março'},\r\n        {value: 12, label: 'Dezembro'},\r\n    ];\r\n\r\n    const years = [\r\n        {value: 2021, label: 2021},\r\n        {value: 2020, label: 2020},\r\n        {value: 2022, label: 2022},\r\n    ];\r\n\r\n    const totalExpenses = useMemo(() => {\r\n        let total: number = 0;\r\n\r\n        expenses.forEach(item => {\r\n            const date = new Date(item.date);\r\n            const year = date.getFullYear();\r\n            const month = date.getMonth() + 1;\r\n\r\n            if(month === monthSelect && year === yearSelect){\r\n                try {\r\n                    total += Number(item.amount);\r\n                }catch{\r\n                    throw new Error('Invalid amount!');\r\n                }\r\n            }\r\n        });\r\n\r\n        return total;\r\n    },[monthSelect, yearSelect]);\r\n\r\n    const totalGains = useMemo(() => {\r\n        let total: number = 0;\r\n\r\n        gains.forEach(item => {\r\n            const date = new Date(item.date);\r\n            const year = date.getFullYear();\r\n            const month = date.getMonth() + 1;\r\n\r\n            if(month === monthSelect && year === yearSelect){\r\n                try {\r\n                    total += Number(item.amount);\r\n                }catch{\r\n                    throw new Error('Invalid amount!');\r\n                }\r\n            }\r\n        });\r\n\r\n        return total;\r\n    },[monthSelect, yearSelect]);\r\n\r\n    const totalBalance = useMemo(() => {\r\n        return totalGains - totalExpenses;\r\n    }, [totalGains, totalExpenses]);\r\n\r\n    const message = useMemo(() => {\r\n        if(totalBalance < 0){\r\n            return {\r\n                title: \"Que triste!\",\r\n                description:\"Nesse mës vocë gastou mais do que deveria!\",\r\n                footerText:\"Verifique seus gastos.\",\r\n                icon:sadImg\r\n            }\r\n        }\r\n        else if(totalBalance === 0){\r\n            return {\r\n                title: \"Ufa!\",\r\n                description:\"Quase Hein!!\",\r\n                footerText:\"Tenha cuidado.\",\r\n                icon:grinningImg\r\n            }\r\n        }\r\n        else{\r\n            return {\r\n                title: \"Muito bem!\",\r\n                description:\"Sua carteira fechou positiva!\",\r\n                footerText:\"Continue assim.\",\r\n                icon:happyImg\r\n            }\r\n        }\r\n    }, [totalBalance]);\r\n\r\n    const relationExpensesVersusGains = useMemo(() => {\r\n        const total = totalGains + totalExpenses;\r\n\r\n        const percentGains = (totalGains / total) * 100;\r\n        const percentExpenses = (totalExpenses / total) * 100;\r\n\r\n        const data = [\r\n            {\r\n                name: \"Entradas\",\r\n                value: totalGains,\r\n                percent: Number(percentGains.toFixed(1)),\r\n                color: '#e44c4e'\r\n            },\r\n            {\r\n                name: \"Saídas\",\r\n                value: totalExpenses,\r\n                percent: Number(percentExpenses.toFixed(1)),\r\n                color: '#f7931b'\r\n            }\r\n        ];\r\n\r\n        return data;\r\n    },[totalGains, totalExpenses]);\r\n\r\n    const historyData = useMemo(() => {\r\n        return listOfMonths.map((_, month ) => {\r\n            let amountEntry = 0;\r\n            gains.forEach(gain => {\r\n                const date = new Date(gain.date);\r\n                const gainMonth = date.getMonth();\r\n                const gainYear = date.getFullYear();\r\n\r\n                if(gainMonth === month && gainYear === yearSelect){\r\n                    try {\r\n                        amountEntry += Number(gain.amount);\r\n                    } catch {\r\n                        throw new Error('amountEntry is invalid!')\r\n                    }\r\n                }\r\n            });\r\n\r\n            let amountOutput = 0;\r\n            gains.forEach(expense => {\r\n                const date = new Date(expense.date);\r\n                const expenseMonth = date.getMonth() + 1;\r\n                const expenseYear = date.getFullYear();\r\n\r\n                if(expenseMonth === month && expenseYear === yearSelect){\r\n                    try {\r\n                        amountOutput += Number(expense.amount);\r\n                    } catch {\r\n                        throw new Error('amountOutput is invalid!')\r\n                    }\r\n                }\r\n            });\r\n\r\n            return {\r\n                monthNumber: month,\r\n                month: listOfMonths[month].substr(0,3),\r\n                amountEntry,\r\n                amountOutput\r\n            }\r\n        }).filter(item => {\r\n            const currentMonth = new Date().getMonth();\r\n            const currentYear = new Date().getFullYear();\r\n\r\n            return (yearSelect === currentYear && item.monthNumber <= currentMonth) || (yearSelect < currentYear)\r\n        })\r\n    },[yearSelect]);\r\n\r\n    const relationExpensesRecurrentVersusEventual = useMemo(() => {\r\n        let amountRecurrent = 0;\r\n        let amountEventual = 0;\r\n\r\n        expenses\r\n        .filter((expense) => {\r\n            const date = new Date(expense.date);\r\n            const year = date.getFullYear();\r\n            const month = date.getMonth() + 1;\r\n\r\n            return month === monthSelect && year === yearSelect;\r\n        })\r\n        .forEach((expense) => {\r\n            if(expense.frequency === 'recurrent'){\r\n                return amountRecurrent += Number(expense.amount);\r\n            }\r\n\r\n            if(expense.frequency === 'eventual'){\r\n                return amountEventual += Number(expense.amount);\r\n            }\r\n        });\r\n\r\n        const total = amountRecurrent + amountEventual;\r\n\r\n        return [\r\n            {\r\n                name: \"Recorrentes\",\r\n                amount: amountRecurrent,\r\n                percent: Number(((amountRecurrent / total) * 100).toFixed(2)),\r\n                color: \"#f7931b\"\r\n            },\r\n            {\r\n                name: \"Eventuais\",\r\n                amount: amountEventual,\r\n                percent: Number(((amountEventual / total) * 100).toFixed(2)),\r\n                color: \"#e44c4e\"\r\n            }\r\n        ]\r\n    },[monthSelect, yearSelect]);\r\n\r\n    return (\r\n        <Container>\r\n            <ContentHeader title=\"Dashboard\" lineColor='#f7931b'>\r\n                <SelectInput\r\n                    options={months}\r\n                    onChange={(e) => handleMonthSelected(e.target.value)}\r\n                    defaultValue={monthSelect}\r\n                />\r\n                <SelectInput\r\n                    options={years}\r\n                    onChange={(e) => handleYearSelected(e.target.value)}\r\n                    defaultValue={yearSelect}\r\n                />\r\n            </ContentHeader>\r\n\r\n            <Content>\r\n                <WalletBox\r\n                    title=\"Saldo\"\r\n                    amount={totalBalance}\r\n                    footerLabel=\"atualizado com base\"\r\n                    icon=\"dolar\"\r\n                    color=\"#4e41f0\"\r\n                />\r\n\r\n                <WalletBox\r\n                    title=\"Entradas\"\r\n                    amount={totalGains}\r\n                    footerLabel=\"entradas\"\r\n                    icon=\"arrowUp\"\r\n                    color=\"#f7931b\"\r\n                />\r\n\r\n                <WalletBox\r\n                    title=\"Saídas\"\r\n                    amount={totalExpenses}\r\n                    footerLabel=\"Saídas\"\r\n                    icon=\"arrowDown\"\r\n                    color=\"#e44c4e\"\r\n                />\r\n\r\n                <MessageBox\r\n                    title= {message.title}\r\n                    description={message.description}\r\n                    footerText={message.footerText}\r\n                    icon={message.icon}\r\n                />\r\n\r\n                <PieChartBox data={relationExpensesVersusGains} />\r\n\r\n                <HistoryBox \r\n                    data={historyData}\r\n                    lineColorAmountEntry=\"#f7931b\"\r\n                    lineColorAmountOutout=\"#e44c4e\"\r\n                />\r\n\r\n                <BarChartBox>\r\n                    \r\n                </BarChartBox>\r\n            </Content>\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}